{#{% extends 'SmartBlogBundle:Article:list.html.twig' %}#}
{% extends 'DmitxeBlogBundle::layout.html.twig' %}

{% set n = categories|length -1 %}
{% for j, category in categories %}
    {% if j<n %}
        {% set breadcrumbs = breadcrumbs ~ '<a href="' ~ path('smart_blog_category', {'slug': category.slugFull}) ~ '">' ~ category ~ '</a> » ' %}
    {% else %}
        {% set breadcrumbs = breadcrumbs ~ '<span>' ~ category ~ '</span>' %}
    {% endif %}
{% endfor %}

{% block smart_blog_content %}
    {% set childenCategories = lastCategory.children %}

    {% if childenCategories|length %}
        <h3>Вложенные категории:</h3>
        <ul>
        {% for category in childenCategories %}
            <li><a href="{{ path('smart_blog_category', {'slug': category.slugFull}) }}">{{ category }}</a></li>
        {% endfor %}
        </ul>
    {% endif %}

    <hr />

    {% block smart_blog_content_articles %}
        {% for article in articles %}
            <h2><a href="{{ path('smart_blog_article', {'slug': article.slug}) }}">{{ article.title }}</a></h2>

            <p><i class="icon-calendar"></i> {{ article.createdAt | localizeddate('full') }}</p>

            <p>{{ article.annotation }}</p>

            <p><a href="{{ path('smart_blog_article', {'slug': article.slug}) }}" class="btn btn-info pull-right">Читать дальше</a></p>

            {% if article.tags|length %}
                {{ 'Tags'|trans }}:
                {% for tag in article.tags %}
                    <a href="{{ path('smart_blog_tag', {'slug': tag.slug}) }}"><span class="label label-info">{{ tag }}</span></a>
                {% endfor %}
            {% endif %}

            {% if article.category %}
                {{ 'Category'|trans }}:
                <a href="{{ path('smart_blog_category', {'slug': article.category.slugFull}) }}"><span class="label label-success">{{ article.category }}</span></a>
            {% endif %}

            <hr/>
        {% endfor %}
    {% endblock smart_blog_content_articles %}

{% endblock smart_blog_content %}
